version: '3.7'

services:
  vault:
    image: hashicorp/vault:1.18.0
    container_name: vault
    environment:
      - VAULT_DEV_ROOT_TOKEN_ID=root
      - VAULT_DEV_LISTEN_ADDRESS=0.0.0.0:8200
      - VAULT_ADDR=http://127.0.0.1:8200
    ports:
      - "8200:8200"
    #volumes:
    #  - vault-data:/vault/data
    networks:
      - app-net
    restart: unless-stopped
  #django:
  #  build:
  #    context: .
  #  ports:
  #    - "8000:8000"
  #  environment:
  #    - EMAIL_HOST=smtp
  #    - EMAIL_PORT=587
  #    - EMAIL_USER=dtranscen@gmail.com
  #    - EMAIL_PASSWORD=Aa123456789.
  #  depends_on:
  #    - smtp

  smtp:
    image: catatnight/postfix
    environment:
      - maildomain=example.com
      - smtp_user=user:yourpassword
    ports:
      - "587:587"

  #nginx:
  #  build:
  #    context: ./nginx
  #    dockerfile: Dockerfile
  #  container_name: nginx-modsecurity
  #  ports:
  #    - "8080:80"
  #  #depends_on:
  #  #  - vault
  #  networks:
  #    - app-net
  #  restart: unless-stopped

networks:
  app-net:
    driver: bridge

#volumes:
#  vault-data:
